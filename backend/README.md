# Backend database models and migrations

This folder now includes Django models and migrations for the tables originally defined in the TypeScript `PostgreSQLService`.

Added models:
- `users.UserSession` -> creates table `user_sessions`
- `chat.Conversation` -> creates table `conversations`
- `recommendations.Recommendation` -> creates table `recommendations`
- `recommendations.UserInteraction` -> creates table `user_interactions`

Existing `profiles.UserProfile` and `users.User` are used for `user_profiles` and `users` tables respectively.

How to apply migrations locally:

1. Activate your backend virtualenv and install dependencies:

```bash
pip install -r backend/requirements.txt
```

2. Run Django migrations:

```bash
cd backend
python manage.py makemigrations
python manage.py migrate
```

3. Optionally initialize the DB schema using the management command (it calls the same SQL DDL):

```bash
python manage.py init_db
```

Notes:
- If you prefer to use Django models and migrations (recommended), run `makemigrations` to generate the migration files (some were added here). If you encounter dependency issues, ensure `AUTH_USER_MODEL` is set and apps are listed in `INSTALLED_APPS`.
- I created migration files for `users`, `chat`, and `recommendations` to match the SQL schema. If you want them regenerated by Django, remove these files and run `makemigrations` from your environment.
